:- compiler_options([xpp_on]).
#include "smp.P"
#include "smp_data.P"
tabled_predicate(test1,0).

shuffle(X,Y) :- seq(X,Y).
shuffle(X,Y) :- seq(Y,X).

shuffle(X,Y,Z) :- seq(X,shuffle(Y,Z)).
shuffle(X,Y,Z) :- seq(Y,shuffle(X,Z)).
shuffle(X,Y,Z) :- seq(Z,shuffle(X,Y)).

shuffle(W,X,Y,Z) :- seq(W,shuffle(X,Y,Z)).
shuffle(W,X,Y,Z) :- seq(X,shuffle(W,Y,Z)).
shuffle(W,X,Y,Z) :- seq(Y,shuffle(W,X,Z)).
shuffle(W,X,Y,Z) :- seq(Z,shuffle(W,X,Y)).

tr_clause(
	test1,
		shuffle(achieve(played1(customer_01,movie_01)),
		achieve(sold(customer_01,movie_01)),
		achieve(played2(customer_02,movie_02)),
		achieve(happy(customer_02,movie_02))),
		seq(played1(customer_01,movie_01),
		seq(played2(customer_02,movie_02),
		seq(happy(customer_02,movie_02),
		sold(customer_01,movie_01))))).

test_description('Test of Analysis of Stat Modifying System').
test_query(test1).

